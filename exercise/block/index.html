<!DOCTYPE html>
<html>
<head>
	<title>Async vs sync</title>
	<style type="text/css">
		pre {
		    background: #f4f4f4;
		    border-left: 3px solid #f36d33;
		    font-size: 20px;
		    padding-left: 20px;
		}
	</style>
</head>
<body>
	<h1>Treasure</h1>
	<button id="block">Block</button>
	<pre>
		<code>
document.querySelector("#block").addEventListener("click", function() {
	for (let c = 0; c < times; c++) {
		console.log(c)
		heavyLoop();
	}
	alert("Done")
});</code>		
	</pre>

	<button id="nonblock">Non Block</button>
	<pre>
		<code>
document.querySelector("#nonblock").addEventListener("click", function() {
	function heavyLoopAsync() {
		let c = 0;
		return function r() {
			if (c++ < times) {
				console.log(c)
				heavyLoop()
				setTimeout(r, 0)
			} else {
				alert("Done")
			}
		}
	}
	heavyLoopAsync()()
});</code>		
	</pre>

  	<script type="text/javascript">

  	const times = 100000;
  	function heavyLoop() {
  		const b = document.querySelector("body")
  		window.getComputedStyle(b);
  	}

document.querySelector("#block").addEventListener("click", function() {
	for (let c = 0; c < times; c++) {
		console.log(c)
		heavyLoop();
	}
	alert("Done")
});

document.querySelector("#nonblock").addEventListener("click", function() {
	function heavyLoopAsync() {
		let c = 0;
		return function r() {
			if (c++ < times) {
				console.log(c)
				heavyLoop()
				setTimeout(r, 0)
			} else {
				alert("Done")
			}
		}
	}
	heavyLoopAsync()()
});
  	</script>
</body>
</html>