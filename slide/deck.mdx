import {
	Split,
	SplitRight,
	Image,
} from 'mdx-deck'

import highlight from '@mdx-deck/themes/syntax-highlighter'
import { swiss as mdxTheme } from '@mdx-deck/themes'
import provider from './component/provider'
import Header from './component/header'

export const theme = {
  ...highlight,
  ...provider,
  ...mdxTheme,
  css: {
    padding: "0 10%"
  },
  font: 'Nunito, sans-serif',
  googleFont: 'https://fonts.googleapis.com/css?family=Nunito:300,300i,700',
  code: {
  },
  pre: {
    fontSize: `28px`,
    lineHeight: `42px`,
    color: `#fff !important`
  },
  heading: {
    position: `relative`,
    zIndex: `1000`,
    textTransform: `none`
  },
}

<Header>JavaScript</Header>

---

<Header>JavaScriptの歴史</Header>

---

<Header>1989: HTTP works !</Header>

<SplitRight>

I just had to take the hypertext idea and connect it to the Transmission Control Protocol and domain name system ideas and—ta-da! —the World Wide Web" - Tim Berners-Lee

<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4e/Sir_Tim_Berners-Lee_%28cropped%29.jpg/440px-Sir_Tim_Berners-Lee_%28cropped%29.jpg" />

</SplitRight>


---

<Header>1995: JavaScript</Header>

<SplitRight>

"22 years ago in May I did 10 days of hard work. I didn’t sleep much." - Brandon Eich

<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d1/Brendan_Eich_Mozilla_Foundation_official_photo.jpg/440px-Brendan_Eich_Mozilla_Foundation_official_photo.jpg" height="80vh" />

</SplitRight>

[thenewstack.io](https://thenewstack.io/brendan-eich-on-creating-javascript-in-10-days-and-what-hed-do-differently-today/)

---

<Header>1999: Ajax</Header>

<Split>

"It appeared as XMLHTTP in the second version of the MSXML library, which shipped with Internet Explorer 5.0 in March 1999 - wikipedia"

<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d6/Jesse_James_Garrett_2016.jpg/400px-Jesse_James_Garrett_2016.jpg" />

</Split>

[A New Approach to Web Applications](https://immagic.com/eLibrary/ARCHIVES/GENERAL//ADTVPATH/A050218G.pdf)

---

<Header>1999: JSON</Header>

<Split>

I do not claim to have invented JSON. It already existed in nature. - Douglas Crockford

<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/24/Douglas_Crockford%2C_February_2013.jpg/400px-Douglas_Crockford%2C_February_2013.jpg" />

</Split>

---
<Header>2004, 2005: AJAX</Header>

<Split>

<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/48/GoogleMaps_logo.svg/140px-GoogleMaps_logo.svg.png" />

<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ab/Gmail_Icon.svg/200px-Gmail_Icon.svg.png" />

</Split>

---

<Header>2006: jQuery</Header>

<Split>
	
<img src="https://upload.wikimedia.org/wikipedia/commons/c/cd/Jresig.png" />

```
$("a").addClass("o").show("slow")
```

</Split>

---

<Header>2008: V8 & Chrome</Header>

<Split>
	
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3f/V8_JavaScript_engine_logo_2.svg/440px-V8_JavaScript_engine_logo_2.svg.png" />

<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Google_Chrome_icon_%28September_2014%29.svg/128px-Google_Chrome_icon_%28September_2014%29.svg.png" />

</Split>

---

<Header>2010: AngularJS(Google)</Header>

<img src="https://angular.io/assets/images/logos/angularjs/AngularJS-Shield.svg" />

---

<Header>2010: npm</Header>

<img src="https://raw.githubusercontent.com/npm/logos/master/npm%20logo/classic/npm-2009.png" />

```
npm install ...
```

---

<Header>2013: React(facebook)</Header>

<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/React-icon.svg/500px-React-icon.svg.png" />

---

<Header>2014: Vue.js, babel(6to5)</Header>

<Split>

<img src="https://cdn-media-1.freecodecamp.org/images/0*xkJgg-6HskYrQ3N7.jpeg" />

<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/02/Babel_Logo.svg/400px-Babel_Logo.svg.png" />

</Split>

---

<Header>2015: ECMAScript 6</Header>

- https://kangax.github.io/compat-table/es6/
- https://caniuse.com

---

<Header>2019: ??? </Header>

---

<Header>2019: Treasureのフロント講義</Header>

<Split>

<img src="https://user-images.githubusercontent.com/5494874/62817336-c60cc380-bb6f-11e9-8d8d-d5405e38cae0.jpg" width="400px" />

**JavaScriptを理解する人が30人増える**

</Split>

---

<Header>JavaScriptおやおや#1:Type</Header>

```
[] + []
[] + {}
{} + []
{} + {}
```
- use `===` over `==`

---

<Header>JavaScriptおやおや#2:グローバル関数</Header>

```
for (var i = 0; i < 5; i++){
  console.log(i)
}
console.log(i)
```
- const > let > var

---

<Header>エラーハンドリング</Header>

```
// 雑にやる
throw New Error("Oops...");

// ちゃんとやる
class MyError extends Error {}
throw New MyError("Oops...");
```
---

<Header>エラーハンドリング（演習）</Header>

- https://github.com/voyagegroup/treasure-javascript/tree/master/exercise/exception
- ヒント: `try...catch{}`
- PRを提出しましょう

---

# Runtime

- node
- **browser**

---
<Header>Event Loop</Header>

- JavaScriptはsingle thread
- Javascript Engineとのインターフェースは大体async
- Get off the main thread

---
<Header>How to block Event Loop</Header>

- `window.alert()`はblock
- [sync `XMLHttpRequest`](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Synchronous_and_Asynchronous_Requests#Example_HTTP_synchronous_request)

```
var request = new XMLHttpRequest();
// `false` makes the request synchronous
request.open('GET', '/heavyRequest', false);
request.send();
```

---

<Header>How to not block Event Loop</Header>

- https://github.com/voyagegroup/treasure-javascript/tree/master/exercise/block

---

<Header>Async, defer script</Header>

<img src="https://www.growingwiththeweb.com/images/2014/02/26/async-vs-defer-twitter.png" />

* https://www.growingwiththeweb.com/2014/02/async-vs-defer-attributes.html

```
<script src="sync.js"></script>
<script src="async.js" async></script>
<script src="defer.js" defer></script>	
```

---

<Header>Click Event</Header>

```
<button id="clickMe">Click Me</button>

document.querySelector("#clickMe").onclick = function(e) {}
document.querySelector("#clickMe").addEventListener("click", function(e) {})
```

---

<Header>Event Propagation</Header>

```
 ----------------------------
|            #o              |
|     ----------------       |
|    |                |      |
|    |       #i       |      |
|    |                |      |
|     ----------------       |
 ----------------------------     
```

---

<Header>Event Propagation（演習）</Header>

- https://github.com/voyagegroup/treasure-javascript/tree/master/exercise/event

---

<Header>SpeechRecognition Event（演習）</Header>

- https://developer.mozilla.org/en-US/docs/Web/API/SpeechRecognition

---

<Header>Fetch API（演習）</Header>

- always `throw new Error()` when error

---

<Header>テスト</Header>

- end to end
- integration
- snapshot
- unit
- static (lint)

---

<Header>テスト（演習）</Header>

- https://github.com/substack/tape
- https://github.com/voyagegroup/treasure-javascript/tree/master/exercise/debounce

---

<Header>npmとセキュリティー</Header>

- https://hackernoon.com/im-harvesting-credit-card-numbers-and-passwords-from-your-site-here-s-how-9a8cb347c5b5

---

Links
 - https://dev.to/steelvoltage/if-javascript-is-single-threaded-how-is-it-asynchronous-56gd